# Projex

ä¸€æ¬¾ç°ä»£åŒ–çš„æœ¬åœ°é¡¹ç›®ç®¡ç†å·¥å…·ï¼ŒåŸºäº Tauri + React æ„å»ºï¼Œæ”¯æŒ S3 å¤šè®¾å¤‡åŒæ­¥ã€‚

![](https://img.shields.io/badge/Platform-macOS-blue.svg)
![](https://img.shields.io/badge/License-MIT-green.svg)
![](https://img.shields.io/badge/Version-1.0.0-orange.svg)
![](https://img.shields.io/badge/Tests-250%20passed-brightgreen.svg)

## æ ¸å¿ƒç‰¹æ€§

### é¡¹ç›®ç®¡ç†
- å®Œæ•´çš„é¡¹ç›®ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šBACKLOG â†’ PLANNED â†’ IN_PROGRESS â†’ BLOCKED â†’ DONE â†’ ARCHIVED
- ä¸å¯å˜çŠ¶æ€æ—¶é—´çº¿ï¼ˆäº‹ä»¶æ—¥å¿—ï¼‰
- å¤šç»´åº¦ç­›é€‰ï¼šçŠ¶æ€ã€å›½å®¶ã€åˆä½œæ–¹ã€è´Ÿè´£äººã€å‚ä¸æˆå‘˜ã€æ ‡ç­¾
- çµæ´»æ’åºï¼šæ›´æ–°æ—¶é—´ã€ä¼˜å…ˆçº§ã€æˆªæ­¢æ—¥æœŸ
- åˆ†é¡µåˆ—è¡¨ï¼ˆæœåŠ¡ç«¯åˆ†é¡µï¼‰

### æˆå‘˜ç®¡ç†
- æˆå‘˜ä¿¡æ¯ï¼šå§“åã€é‚®ç®±ã€è§’è‰²ã€å¤‡æ³¨
- é¢„è®¾è§’è‰²ï¼šæµ‹è¯•ã€äº§å“ç»ç†ã€åç«¯å¼€å‘ã€å‰ç«¯å¼€å‘
- é¡¹ç›®è§†å›¾ï¼šå½“å‰å‚ä¸é¡¹ç›®ã€å†å²é¡¹ç›®

### åˆä½œæ–¹ç®¡ç†
- åˆä½œæ–¹æ¡£æ¡ˆï¼šåç§°ã€å¤‡æ³¨ã€å…³è”é¡¹ç›®
- ä¸å¯å˜çº¦æŸï¼šé¡¹ç›®åˆ›å»ºå Partner ä¸å¯æ›´æ”¹

### æ•°æ®ç®¡ç†
- æœ¬åœ° SQLite æ•°æ®åº“ï¼Œæ•°æ®å®Œå…¨ç§æœ‰
- JSON å¯¼å‡º / å¯¼å…¥ï¼ˆå¹‚ç­‰ï¼Œé‡å¤ ID è‡ªåŠ¨è·³è¿‡ï¼‰
- S3 å¤šè®¾å¤‡åŒæ­¥ï¼ˆå…¼å®¹ AWS S3 / Cloudflare R2 / MinIOï¼Œå« checksum æ ¡éªŒã€æ¯è®¾å¤‡æ¸¸æ ‡ã€é˜²å›æµï¼‰
- å…¨é‡å¿«ç…§å¤‡ä»½ä¸æ¢å¤

### åº”ç”¨æ—¥å¿—æŸ¥çœ‹
- **åº”ç”¨å†…æ—¥å¿—æŸ¥çœ‹å™¨** â€” æ— éœ€å¤–éƒ¨å·¥å…·å³å¯æŸ¥çœ‹å‰åç«¯æ—¥å¿—
- **å¯è°ƒæ—¥å¿—çº§åˆ«** â€” ERROR/WARN/INFO/DEBUGï¼ˆéœ€é‡å¯ç”Ÿæ•ˆï¼‰
- **æ™ºèƒ½è„±æ•** â€” è‡ªåŠ¨é®ç½©æ•æ„Ÿæ•°æ®ï¼ˆS3 å‡­æ®ã€ä»¤ç‰Œç­‰ï¼‰
- **é«˜æ•ˆæµè§ˆ** â€” åˆ†é¡µåŠ è½½ï¼ˆæ¯é¡µ 256KBï¼‰ã€å®æ—¶æœç´¢
- **ä¾¿æ·æ“ä½œ** â€” å¤åˆ¶åˆ°å‰ªè´´æ¿ã€ä¸‹è½½ã€æ¸…ç©ºæ—¥å¿—
- **è‡ªåŠ¨è½®è½¬** â€” å•æ–‡ä»¶æœ€å¤§ 10MBï¼Œä¿ç•™æœ€è¿‘ 5 ä¸ªæ–‡ä»¶
- è¯¦è§ [docs/LOGS_VIEWER.md](./docs/LOGS_VIEWER.md)

### åŒæ­¥ç°çŠ¶ï¼ˆ2026-02ï¼‰

```mermaid
flowchart LR
  A[æœ¬åœ°ä¸šåŠ¡å†™å…¥] --> B[sync_metadata è§¦å‘å™¨è®°å½•]
  B --> C[ä¸Šä¼  delta.gz]
  C --> D[æ‰«æå¹¶ä¸‹è½½è¿œç«¯ deltas]
  D --> E[checksum æ ¡éªŒ]
  E --> F[äº‹åŠ¡åº”ç”¨]
  F --> G[é˜²å›æµæ ‡è®°]
  G --> H[æ¨è¿›æ¯è®¾å¤‡æ¸¸æ ‡]
```

| èƒ½åŠ› | çŠ¶æ€ | è¯´æ˜ |
|---|---|---|
| æœ¬åœ° Delta é‡‡é›†/ä¸Šä¼  | âœ… | å·²å®Œæˆ |
| è¿œç«¯ Delta ä¸‹è½½/åº”ç”¨ | âœ… | å·²åœ¨ `cmd_sync_full` è½åœ° |
| `project_tags` / `project_comments` åŒæ­¥ | âœ… | å«æ ‡ç­¾å¤åˆé”®åˆ é™¤ |
| é˜²å›æµï¼ˆping-pong æŠ‘åˆ¶ï¼‰ | âœ… | `mark_remote_applied_operations_synced` |
| æœ€å° LWW ä¿æŠ¤ | âœ… | `remote_version < local_version` æ—¶è·³è¿‡ |
| E2E åŠ å¯†ï¼ˆå¯é€‰ï¼‰ | ğŸš§ | M7 è§„åˆ’ä¸­ |
| å¿«ç…§è½®è½¬æ¸…ç† | ğŸš§ | M7 è§„åˆ’ä¸­ |

### UI/UX
- æ¯›ç»ç’ƒæ•ˆæœã€æ¸å˜æŒ‰é’®ã€è‹±é›„å¡ç‰‡
- Zustand å…¨å±€çŠ¶æ€ç®¡ç†
- å“åº”å¼å¸ƒå±€ï¼Œé€‚é…ä¸åŒçª—å£å¤§å°
- ç©ºçŠ¶æ€å¼•å¯¼ã€å…³é”®æ“ä½œäºŒæ¬¡ç¡®è®¤

## æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| **æ¡Œé¢æ¡†æ¶** | Tauri v2 |
| **å‰ç«¯** | React 19 + TypeScript |
| **æ„å»ºå·¥å…·** | Vite 7 |
| **UI ç»„ä»¶åº“** | Mantine 7 |
| **çŠ¶æ€ç®¡ç†** | Zustand |
| **åç«¯** | Rust |
| **æ•°æ®åº“** | SQLite (rusqlite) |
| **åŒæ­¥** | aws-sdk-s3 + Vector Clock |

## å‰ç½®è¦æ±‚

- **Node.js** 18+
- **Rust** 1.77.2+
- **macOS** 12+

## å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run tauri dev

# ç”Ÿäº§æ„å»º
npm run tauri build

# è¿è¡Œåç«¯æµ‹è¯•ï¼ˆ250 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
cd src-tauri && cargo test
```

é¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®ç›®å½•å’Œæ•°æ®åº“ï¼Œå¹¶æ‰§è¡Œè¿ç§»ã€‚

### MinIO æœ¬åœ°å¼€å‘åŒæ­¥

```bash
cp .env.minio.example .env.minio
docker compose --env-file .env.minio -f docker-compose.minio.yml up -d
```

å®Œæ•´ç¯å¢ƒä¸æµ‹è¯•é…ç½®è§ [docs/SYNC_ENV_PROFILES.md](./docs/SYNC_ENV_PROFILES.md)ã€‚

## é¡¹ç›®ç»“æ„

```
projex/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ PRD.md                # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ MILESTONES.md         # é‡Œç¨‹ç¢‘è·Ÿè¸ª
â”‚   â”œâ”€â”€ SYNC_S3_DESIGN.md     # S3 åŒæ­¥æ¶æ„è®¾è®¡
â”‚   â”œâ”€â”€ SYNC_EXPLAINED.md     # åŒæ­¥æœºåˆ¶è¯´æ˜
â”‚   â””â”€â”€ SYNC_ENV_PROFILES.md  # MinIO/S3/R2 ç¯å¢ƒé…ç½®
â”œâ”€â”€ src/                       # å‰ç«¯
â”‚   â”œâ”€â”€ api/                  # Tauri invoke å°è£…
â”‚   â”œâ”€â”€ components/           # å…±äº«ç»„ä»¶ (ConfirmModal, EmptyState, SyncStatusBar)
â”‚   â”œâ”€â”€ stores/               # Zustand stores
â”‚   â”œâ”€â”€ sync/                 # å‰ç«¯åŒæ­¥ç®¡ç†
â”‚   â”œâ”€â”€ pages/                # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ theme.ts              # Mantine ä¸»é¢˜
â”œâ”€â”€ src-tauri/                 # åç«¯ (Rust)
â”‚   â”œâ”€â”€ migrations/           # SQL è¿ç§» (5 ä¸ª)
â”‚   â”œâ”€â”€ tests/                # é›†æˆæµ‹è¯• (13 ä¸ªæ–‡ä»¶, 250 ä¸ªç”¨ä¾‹)
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ app/              # ä¸šåŠ¡é€»è¾‘ (CRUD, å¯¼å…¥å¯¼å‡º)
â”‚       â”œâ”€â”€ commands/         # Tauri å‘½ä»¤å±‚
â”‚       â”œâ”€â”€ domain/           # é¢†åŸŸ (çŠ¶æ€æœº)
â”‚       â”œâ”€â”€ infra/            # åŸºç¡€è®¾æ–½ (DB)
â”‚       â””â”€â”€ sync/             # S3 åŒæ­¥ (Delta, Snapshot, VectorClock)
â”œâ”€â”€ AGENTS.md                  # AI Agent åä½œè§„èŒƒ
â””â”€â”€ README.md
```

## ä½¿ç”¨æŒ‡å—

1. **åˆ›å»ºåˆä½œæ–¹** â†’ "åˆä½œæ–¹" â†’ "æ–°å»ºåˆä½œæ–¹"
2. **åˆ›å»ºæˆå‘˜** â†’ "æˆå‘˜" â†’ "æ–°å»ºæˆå‘˜"
3. **åˆ›å»ºé¡¹ç›®** â†’ "é¡¹ç›®" â†’ "æ–°å»ºé¡¹ç›®"ï¼ˆéœ€å…ˆåˆ›å»ºåˆä½œæ–¹å’Œæˆå‘˜ï¼‰
4. **ç®¡ç†é¡¹ç›®** â†’ é¡¹ç›®è¯¦æƒ…é¡µå˜æ›´çŠ¶æ€ã€æ·»åŠ /ç§»é™¤æˆå‘˜
5. **å¯¼å‡º/å¯¼å…¥æ•°æ®** â†’ "è®¾ç½®" â†’ "å¯¼å‡ºæ•°æ®" / "å¯¼å…¥æ•°æ®"
6. **é…ç½® S3 åŒæ­¥** â†’ "è®¾ç½®" â†’ S3 é…ç½® â†’ ä¿å­˜ â†’ ç«‹å³åŒæ­¥

## é…ç½®è¯´æ˜

| é¡¹ç›® | å€¼ |
|------|---|
| æ•°æ®åº“ä½ç½® | `~/Library/Application Support/com.nickdu.projex/app.db` |
| é»˜è®¤çª—å£ | 1200 x 800 |
| æœ€å°çª—å£ | 800 x 500 |
| Schema ç‰ˆæœ¬ | 2 |

## è·¯çº¿å›¾

- [x] é¡¹ç›®çŠ¶æ€æœºä¸æ—¶é—´çº¿
- [x] æˆå‘˜ä¸åˆä½œæ–¹ç®¡ç†
- [x] JSON å¯¼å‡º / å¯¼å…¥
- [x] S3 å¤šè®¾å¤‡åŒæ­¥ï¼ˆDelta + Snapshotï¼‰
- [x] è¿œç«¯ Delta åº”ç”¨ä¸é˜²å›æµé—­ç¯
- [x] ä¸­è‹±æ–‡å›½é™…åŒ–
- [x] å¯Œæ–‡æœ¬è¯„è®ºï¼ˆTiptapï¼‰
- [x] åº”ç”¨å†…æ—¥å¿—æŸ¥çœ‹ä¸è„±æ•
- [ ] M7-P1ï¼šåŒæ­¥å¯é€‰ç«¯åˆ°ç«¯åŠ å¯†ï¼ˆE2Eï¼‰
- [ ] M7-P2ï¼šå¿«ç…§é€‰æ‹©æ’åº + Delta key å”¯ä¸€æ€§å¢å¼º
- [ ] M7-P3ï¼šåŒæ­¥å¯è§‚æµ‹æ€§ï¼ˆé˜¶æ®µæŒ‡æ ‡ + ç»“æ„åŒ–æ—¥å¿—ï¼‰
- [ ] M7-P4ï¼šå¤§å¯¹è±¡æ¡¶æ‰«æä¸åŒæ­¥æ€§èƒ½ä¼˜åŒ–
- [ ] Linux æ”¯æŒ
- [ ] ä»ªè¡¨ç›˜ä¸åˆ†æè§†å›¾
- [ ] é”®ç›˜å¿«æ·é”®

## è®¸å¯è¯

MIT License
